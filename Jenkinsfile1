pipeline {
    agent any

    tools {
        // Install the Maven version configured as "M3" and add it to the .
        maven "mymaven1"
    }

    stages {
        stage('Build') {
            steps {
            git url: 'https://github.com/Gautirockz/star-agile-banking-finance.git', branch: 'master'
                sh "mvn -Dmaven.test.failure.ignore=true clean package"
                  }        
        }
stage('Create Docker Image') {
  steps {
    sh 'docker build -t saigowtham2605/financeme1:1.0 .'
  }
}
  stage('Docker-Login') {
           steps {
              withCredentials([usernamePassword(credentialsId: 'dockercreds', passwordVariable: 'dockerpassword', usernameVariable: 'dockervariable')]) {
               sh 'docker login -u ${dockerlogin} -p ${dockerpassword}'
                                   }
                        }
                }
       stage('Push-Image') {
           steps {
               sh 'docker push docker push saigowtham2605/financeme1:1:0'
                     }
                }
}
}
